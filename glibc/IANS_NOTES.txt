Plan of Attack 

Based on the approach taken for psmalloc.

0[X]. get av->top under control

1[X]. twin data with metadata

2[X]. get metadata to agree with the data

3[X]. _int_ allocation routines should return chunkinfoptrs not mems

4[X]. bins need to become chunkinfoptrs not mchunkptrs

5[X]. all the _int_ routines need chunkinfoptrs args

6[X]. trim the metadata stored in mchunkptrs (the linked lists)

7[X]. last remainder etc

8[X]. only store arena numbers in mchunkptr

9[X]. remove the sharing of the header and footer

10. add in the canary and tagging debugging tool. hence verify that
the chunks no longer intersect.

11. hooks.

12. cache.

13. issue #5. memory pool optimization.


Random Notes.

1. the _int_free locking mess should probably get tossed.

2. the (old and now inaccurate) code comments need to be trimmed.

3. I use some stdatomics in arena.c which should prolly use glibc atomics.


========

To push this upstream we need to eliminate prev_size with pointers
to the next_md and prev_md.





Memory Exhaustion Design

We need to improve the psmalloc2 design so that we can recover
from memory exhaustion, specifically when we need to create metadata.

The idea would be that prior to any memory allocation
the necessary new metadata would be preallocated.

Say as part of the arena.

chunkinfoptr  md_pool[4];





